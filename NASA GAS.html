<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Global Greenhouse Gas Emissions Map</title>
    <!-- Leaflet CSS for the map -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <!-- Google Font for sleek typography -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap"
      rel="stylesheet" />
    <!-- External CSS for custom styles -->
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background-color: #121212;
        color: #f0f0f0;
        font-family: "Poppins", sans-serif;
      }

      h1,
      h2 {
        color: #ffffff;
        text-align: center;
        font-weight: 600;
      }

      p {
        text-align: center;
        margin-bottom: 20px;
        font-weight: 400;
        font-size: 1rem;
        line-height: 1.6;
        padding: 0 15px;
      }

      #map {
        height: 600px;
        width: 100%;
        margin: 40px 0;
        background-color: #202020;
        border-radius: 8px;
      }

      /* Custom marker styles for map */
      .marker-red {
        background-color: red;
        width: 12px;
        height: 12px;
        border-radius: 50%;
      }

      .marker-green {
        background-color: green;
        width: 12px;
        height: 12px;
        border-radius: 50%;
      }

      .marker-mixed {
        background-image: linear-gradient(to right, red, green);
        width: 12px;
        height: 12px;
        border-radius: 50%;
      }

      /* Legend for map */
      .legend {
        background-color: #202020;
        padding: 10px;
        font-size: 0.9rem;
        color: #fff;
        border-radius: 8px;
        border: 1px solid #444;
        width: max-content;
        margin: 10px auto;
        text-align: left;
      }

      .legend div {
        display: flex;
        align-items: center;
        margin-bottom: 5px;
      }

      .legend div span {
        margin-left: 8px;
      }

      /* Styled table for emissions data */
      table {
        margin: 20px auto;
        width: 90%;
        border-collapse: collapse;
        background-color: #202020;
        color: #ffffff;
        border-radius: 8px;
      }

      th,
      td {
        padding: 15px;
        text-align: center;
        border: 1px solid #333;
      }

      th {
        background-color: #333;
        color: #f0f0f0;
      }

      /* Chart container */
      #chart-container {
        margin: 40px auto;
        width: 90%;
        max-width: 800px;
        height: 400px;
      }

      /* Controls for user interaction */
      #controls {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 20px auto;
      }

      select {
        padding: 8px 12px;
        border-radius: 4px;
        background-color: #333;
        color: #f0f0f0;
        border: none;
        font-size: 0.9rem;
      }

      /* Section Headers */
      .section-heading {
        margin-top: 40px;
        font-size: 1.5rem;
        text-transform: uppercase;
        letter-spacing: 1.2px;
      }

      /* Footer styling */
      footer {
        margin-top: 40px;
        padding: 20px;
        background-color: #202020;
        color: #f0f0f0;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Global Greenhouse Gas Emissions</h1>
      <p>
        Project Overview Welcome to the Global Greenhouse Gas Emissions
        Visualization Project. This project leverages NASA's atmospheric data to
        provide a comprehensive overview of CO2 and Methane emissions across
        different regions. The interactive map and chart features enable users
        to explore emission patterns, compare data between countries, and gain
        insights into global emission trends.
      </p>
    </header>

    <!-- User controls for map and emissions filtering -->
    <div id="controls">
      <div>
        <label for="place-select">Select Place:</label>
        <select id="place-select" onchange="updateVisualization()">
          <option value="all">All Places</option>
        </select>
      </div>

      <div>
        <label for="emission-filter">Filter Emission Type:</label>
        <select id="emission-filter" onchange="updateVisualization()">
          <option value="all">All Emissions</option>
          <option value="co2">CO2 Emissions</option>
          <option value="methane">Methane Emissions</option>
          <option value="both">Both CO2 & Methane</option>
          <option value="methane-leaks">Methane Leaks</option>
        </select>
      </div>
    </div>

    <!-- Chart section -->
    <section>
      <h2 class="section-heading">Emissions Data Graph</h2>
      <p>
        The bar chart below visualizes CO2 and methane emissions (measured in
        megatonnes) for selected countries. This data offers insights into which
        regions are contributing the most to greenhouse gases.
      </p>
      <div id="chart-container">
        <canvas id="emissions-chart"></canvas>
      </div>
    </section>

    <!-- Map section -->
    <section>
      <h2 class="section-heading">Global Emissions Map</h2>
      <p>
        The map below visualizes global CO2 and methane emissions. Red markers
        represent CO2 emissions, green markers represent methane, and combined
        markers indicate both. Zoom in to explore specific regions.
      </p>
      <div id="map"></div>

      <!-- Legend -->
      <div class="legend">
        <h3>Legend</h3>
        <div>
          <div class="marker-red"></div>
          <span>CO2 Emissions</span>
        </div>
        <div>
          <div class="marker-green"></div>
          <span>Methane Emissions</span>
        </div>
        <div>
          <div class="marker-mixed"></div>
          <span>CO2 & Methane Emissions</span>
        </div>
      </div>
    </section>

    <!-- Table section -->
    <section>
      <h2 class="section-heading">Emissions Data Table</h2>
      <p>
        Below is a breakdown of greenhouse gas emissions for different
        countries, showing both CO2 and methane emissions. This data helps
        provide a clearer understanding of the contribution of different regions
        to climate change.
      </p>
      <table>
        <thead>
          <tr>
            <th>Country</th>
            <th>CO2 Emissions (MtCO2)</th>
            <th>Methane Emissions (MtCH4)</th>
            <th>Methane Leaks (MtCH4)</th>
          </tr>
        </thead>
        <tbody id="emission-table-body"></tbody>
      </table>
    </section>

    <section id="about-section" class="about-section">
      <h2>About Our Team</h2>
      <br />
      <div class="team-member">
        <h3>DEEKSHA M</h3>
        <pre>
        Department: Computer Science and Engineering
        Email:eng23cs0054@dsu.edu.in</pre
        >
        <br />
      </div>
      <div class="team-member">
        <h3>GURUMAL ROOPASHREE</h3>
        <pre>
        Department: Computer Science and Engineering
        Email:eng23cs0071@dsu.edu.in</pre
        >
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <p>
        Developed as part of NASA Space Apps Challenge 2024 by Team Neighborhood
        Carbon Ninjas.
      </p>
    </footer>

    <!-- Load Leaflet and Chart.js scripts -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      // Locations data
      var locations = [
        {
          name: "United States",
          latitude: 37.0902,
          longitude: -95.7129,
          co2: 5000,
          methane: 600,
          methaneLeaks: 100,
        },
        {
          name: "China",
          latitude: 35.8617,
          longitude: 104.1954,
          co2: 10000,
          methane: 800,
          methaneLeaks: 150,
        },
        {
          name: "India",
          latitude: 20.5937,
          longitude: 78.9629,
          co2: 2500,
          methane: 300,
          methaneLeaks: 50,
        },
        {
          name: "Russia",
          latitude: 61.524,
          longitude: 105.3188,
          co2: 1700,
          methane: 200,
          methaneLeaks: 30,
        },
        {
          name: "Japan",
          latitude: 36.2048,
          longitude: 138.2529,
          co2: 1200,
          methane: 150,
          methaneLeaks: 20,
        },
        {
          name: "Germany",
          latitude: 51.1657,
          longitude: 10.4515,
          co2: 800,
          methane: 100,
          methaneLeaks: 15,
        },
        {
          name: "United Kingdom",
          latitude: 55.3781,
          longitude: -3.436,
          co2: 600,
          methane: 80,
          methaneLeaks: 10,
        },
        {
          name: "France",
          latitude: 46.6034,
          longitude: 1.8883,
          co2: 500,
          methane: 70,
          methaneLeaks: 8,
        },
        {
          name: "Brazil",
          latitude: -14.235,
          longitude: -51.9253,
          co2: 1200,
          methane: 150,
          methaneLeaks: 25,
        },
        {
          name: "Canada",
          latitude: 56.1304,
          longitude: -106.3468,
          co2: 700,
          methane: 90,
          methaneLeaks: 12,
        },
        {
          name: "Australia",
          latitude: -25.2744,
          longitude: 133.7751,
          co2: 900,
          methane: 110,
          methaneLeaks: 18,
        },
        {
          name: "South Korea",
          latitude: 35.9078,
          longitude: 127.7669,
          co2: 1100,
          methane: 130,
          methaneLeaks: 20,
        },
        {
          name: "Mexico",
          latitude: 23.6345,
          longitude: -102.5528,
          co2: 1300,
          methane: 160,
          methaneLeaks: 22,
        },
        {
          name: "Indonesia",
          latitude: -0.7893,
          longitude: 113.9213,
          co2: 1500,
          methane: 200,
          methaneLeaks: 30,
        },
        {
          name: "Italy",
          latitude: 41.8719,
          longitude: 12.5674,
          co2: 600,
          methane: 80,
          methaneLeaks: 10,
        },
        {
          name: "Spain",
          latitude: 40.4637,
          longitude: -3.7492,
          co2: 500,
          methane: 60,
          methaneLeaks: 8,
        },
        {
          name: "Turkey",
          latitude: 38.9637,
          longitude: 35.2433,
          co2: 800,
          methane: 90,
          methaneLeaks: 15,
        },
        {
          name: "Saudi Arabia",
          latitude: 23.8859,
          longitude: 45.0792,
          co2: 900,
          methane: 100,
          methaneLeaks: 20,
        },
        {
          name: "South Africa",
          latitude: -30.5595,
          longitude: 22.9375,
          co2: 1000,
          methane: 120,
          methaneLeaks: 25,
        },
        {
          name: "Argentina",
          latitude: -38.4161,
          longitude: -63.6167,
          co2: 800,
          methane: 70,
          methaneLeaks: 12,
        },
        {
          name: "Nigeria",
          latitude: 9.082,
          longitude: 8.6753,
          co2: 700,
          methane: 150,
          methaneLeaks: 20,
        },
        {
          name: "Vietnam",
          latitude: 14.0583,
          longitude: 108.2772,
          co2: 600,
          methane: 80,
          methaneLeaks: 15,
        },
        {
          name: "Philippines",
          latitude: 12.8797,
          longitude: 121.774,
          co2: 500,
          methane: 60,
          methaneLeaks: 10,
        },
        {
          name: "Thailand",
          latitude: 15.87,
          longitude: 100.9925,
          co2: 600,
          methane: 70,
          methaneLeaks: 12,
        },
        {
          name: "Colombia",
          latitude: 4.5709,
          longitude: -74.2973,
          co2: 400,
          methane: 50,
          methaneLeaks: 8,
        },
        {
          name: "Ethiopia",
          latitude: 9.145,
          longitude: 40.4897,
          co2: 300,
          methane: 40,
          methaneLeaks: 5,
        },
        {
          name: "Egypt",
          latitude: 26.8206,
          longitude: 30.8025,
          co2: 600,
          methane: 80,
          methaneLeaks: 10,
        },
        {
          name: "Iran",
          latitude: 32.4279,
          longitude: 53.688,
          co2: 800,
          methane: 100,
          methaneLeaks: 15,
        },
        {
          name: "Malaysia",
          latitude: 4.2105,
          longitude: 101.9758,
          co2: 500,
          methane: 60,
          methaneLeaks: 8,
        },
        {
          name: "Ukraine",
          latitude: 48.3794,
          longitude: 31.1656,
          co2: 700,
          methane: 90,
          methaneLeaks: 12,
        },
        {
          name: "Iraq",
          latitude: 33.2232,
          longitude: 43.6793,
          co2: 400,
          methane: 50,
          methaneLeaks: 5,
        },
        {
          name: "Kazakhstan",
          latitude: 48.0196,
          longitude: 66.9237,
          co2: 600,
          methane: 70,
          methaneLeaks: 10,
        },
        {
          name: "Venezuela",
          latitude: 6.4238,
          longitude: -66.5897,
          co2: 300,
          methane: 40,
          methaneLeaks: 5,
        },
        {
          name: "Peru",
          latitude: -9.19,
          longitude: -75.0152,
          co2: 400,
          methane: 50,
          methaneLeaks: 8,
        },
        {
          name: "Angola",
          latitude: -11.2027,
          longitude: 17.8739,
          co2: 200,
          methane: 30,
          methaneLeaks: 4,
        },
        {
          name: "Sudan",
          latitude: 12.8628,
          longitude: 30.2176,
          co2: 300,
          methane: 40,
          methaneLeaks: 5,
        },
        {
          name: "Morocco",
          latitude: 31.7917,
          longitude: -7.0926,
          co2: 400,
          methane: 50,
          methaneLeaks: 6,
        },
        {
          name: "Uzbekistan",
          latitude: 41.3775,
          longitude: 64.585,
          co2: 500,
          methane: 60,
          methaneLeaks: 7,
        },
        {
          name: "Afghanistan",
          latitude: 33.9391,
          longitude: 67.7099,
          co2: 200,
          methane: 20,
          methaneLeaks: 3,
        },
        {
          name: "Nepal",
          latitude: 28.3949,
          longitude: 84.124,
          co2: 300,
          methane: 30,
          methaneLeaks: 4,
        },
        {
          name: "Sri Lanka",
          latitude: 7.8731,
          longitude: 80.7718,
          co2: 400,
          methane: 40,
          methaneLeaks: 5,
        },
        {
          name: "Bangladesh",
          latitude: 23.685,
          longitude: 90.3563,
          co2: 500,
          methane: 60,
          methaneLeaks: 6,
        },
        {
          name: "Czech Republic",
          latitude: 49.8175,
          longitude: 15.473,
          co2: 600,
          methane: 80,
          methaneLeaks: 10,
        },
        {
          name: "Finland",
          latitude: 61.9241,
          longitude: 25.7482,
          co2: 400,
          methane: 50,
          methaneLeaks: 6,
        },
        {
          name: "Sweden",
          latitude: 60.1282,
          longitude: 18.6435,
          co2: 500,
          methane: 60,
          methaneLeaks: 7,
        },
        {
          name: "Norway",
          latitude: 60.472,
          longitude: 8.4689,
          co2: 300,
          methane: 40,
          methaneLeaks: 5,
        },
        {
          name: "Denmark",
          latitude: 56.2639,
          longitude: 9.5018,
          co2: 400,
          methane: 50,
          methaneLeaks: 6,
        },
        {
          name: "Belgium",
          latitude: 50.8503,
          longitude: 4.3517,
          co2: 600,
          methane: 80,
          methaneLeaks: 10,
        },
        {
          name: "Netherlands",
          latitude: 52.1326,
          longitude: 5.2913,
          co2: 700,
          methane: 90,
          methaneLeaks: 12,
        },
        {
          name: "Switzerland",
          latitude: 46.8182,
          longitude: 8.2275,
          co2: 500,
          methane: 60,
          methaneLeaks: 8,
        },
        {
          name: "Austria",
          latitude: 47.5162,
          longitude: 14.5501,
          co2: 400,
          methane: 50,
          methaneLeaks: 6,
        },
        {
          name: "Ireland",
          latitude: 53.4129,
          longitude: -8.2439,
          co2: 300,
          methane: 40,
          methaneLeaks: 5,
        },
        {
          name: "Portugal",
          latitude: 39.3999,
          longitude: -8.2245,
          co2: 400,
          methane: 50,
          methaneLeaks: 6,
        },
        {
          name: "Greece",
          latitude: 39.0742,
          longitude: 21.8243,
          co2: 500,
          methane: 60,
          methaneLeaks: 7,
        },
        {
          name: "Hungary",
          latitude: 47.1625,
          longitude: 19.5033,
          co2: 400,
          methane: 50,
          methaneLeaks: 6,
        },
        {
          name: "Romania",
          latitude: 45.9432,
          longitude: 24.9668,
          co2: 500,
          methane: 60,
          methaneLeaks: 7,
        },
        {
          name: "Bulgaria",
          latitude: 42.7339,
          longitude: 25.4858,
          co2: 300,
          methane: 40,
          methaneLeaks: 5,
        },
        {
          name: "Slovakia",
          latitude: 48.669,
          longitude: 19.699,
          co2: 400,
          methane: 50,
          methaneLeaks: 6,
        },
        {
          name: "Slovenia",
          latitude: 46.1512,
          longitude: 14.9955,
          co2: 300,
          methane: 40,
          methaneLeaks: 5,
        },
        {
          name: "Croatia",
          latitude: 45.1,
          longitude: 15.2,
          co2: 400,
          methane: 50,
          methaneLeaks: 6,
        },
        {
          name: "Lithuania",
          latitude: 55.1694,
          longitude: 23.8813,
          co2: 300,
          methane: 40,
          methaneLeaks: 5,
        },
        {
          name: "Latvia",
          latitude: 56.8796,
          longitude: 24.6032,
          co2: 300,
          methane: 40,
          methaneLeaks: 5,
        },
        {
          name: "Estonia",
          latitude: 58.5953,
          longitude: 25.0136,
          co2: 200,
          methane: 30,
          methaneLeaks: 4,
        },
        {
          name: "Malta",
          latitude: 35.9375,
          longitude: 14.3754,
          co2: 200,
          methane: 20,
          methaneLeaks: 3,
        },
        {
          name: "Cyprus",
          latitude: 35.1264,
          longitude: 33.4299,
          co2: 200,
          methane: 20,
          methaneLeaks: 3,
        },
        {
          name: "Iceland",
          latitude: 64.9631,
          longitude: -19.0208,
          co2: 100,
          methane: 10,
          methaneLeaks: 2,
        },
        {
          name: "Luxembourg",
          latitude: 49.6118,
          longitude: 6.1319,
          co2: 300,
          methane: 40,
          methaneLeaks: 5,
        },
        {
          name: "Monaco",
          latitude: 43.7384,
          longitude: 7.4246,
          co2: 100,
          methane: 10,
          methaneLeaks: 1,
        },
        {
          name: "Andorra",
          latitude: 42.5063,
          longitude: 1.5211,
          co2: 50,
          methane: 5,
          methaneLeaks: 1,
        },
        {
          name: "San Marino",
          latitude: 43.9333,
          longitude: 12.4467,
          co2: 50,
          methane: 5,
          methaneLeaks: 1,
        },
        {
          name: "Liechtenstein",
          latitude: 47.1662,
          longitude: 9.5554,
          co2: 50,
          methane: 5,
          methaneLeaks: 1,
        },
        {
          name: "Vatican City",
          latitude: 41.9029,
          longitude: 12.4534,
          co2: 10,
          methane: 1,
          methaneLeaks: 0,
        },
      ];

      // Global variable to store chart instance
      var emissionsChart;

      // Populate place dropdown
      var placeSelect = document.getElementById("place-select");
      locations.forEach(function (location) {
        var option = document.createElement("option");
        option.value = location.name;
        option.text = location.name;
        placeSelect.add(option);
      });

      // Initialize map
      var map = L.map("map").setView([20, 0], 2);
      L.tileLayer(
        "https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",
        {
          maxZoom: 19,
        }
      ).addTo(map);

      var markers = [];

      // Update the visualization based on filters
      function updateVisualization() {
        var selectedPlace = document.getElementById("place-select").value;
        var emissionFilter = document.getElementById("emission-filter").value;

        // Clear previous markers
        markers.forEach(function (marker) {
          map.removeLayer(marker);
        });
        markers = [];

        // Clear previous table data
        document.getElementById("emission-table-body").innerHTML = "";

        // Clear chart data
        var co2Data = [];
        var methaneData = [];
        var countryNames = [];

        // Loop through locations to add markers, table rows, and chart data
        locations.forEach(function (location) {
          var addMarker = true;

          // Filter by selected place
          if (selectedPlace !== "all" && location.name !== selectedPlace) {
            addMarker = false;
          }

          // Filter by emission type
          if (emissionFilter === "co2" && location.co2 === 0) {
            addMarker = false;
          }
          if (emissionFilter === "methane" && location.methane === 0) {
            addMarker = false;
          }
          if (
            emissionFilter === "methane-leaks" &&
            location.methaneLeaks === 0
          ) {
            addMarker = false;
          }

          if (addMarker) {
            // Add marker to map
            var markerColor =
              location.co2 > 0 && location.methane > 0
                ? "marker-mixed"
                : location.co2 > 0
                ? "marker-red"
                : "marker-green";
            var newMarker = L.marker([location.latitude, location.longitude], {
              icon: L.divIcon({
                className: markerColor,
              }),
            }).addTo(map);
            newMarker.bindPopup(
              "<b>" +
                location.name +
                "</b><br><b>CO2 Emissions:</b> " +
                location.co2 +
                " MtCO2<br><b>Methane Emissions:</b> " +
                location.methane +
                " MtCH4"
            );
            markers.push(newMarker);

            // Update table
            var row = document.createElement("tr");
            row.innerHTML =
              "<td>" +
              location.name +
              "</td><td>" +
              location.co2 +
              "</td><td>" +
              location.methane +
              "</td><td>" +
              location.methaneLeaks +
              "</td>";
            document.getElementById("emission-table-body").appendChild(row);

            // Add data to chart arrays
            co2Data.push(location.co2);
            methaneData.push(location.methane);
            countryNames.push(location.name);
          }
        });

        // Destroy previous chart instance if it exists
        if (emissionsChart) {
          emissionsChart.destroy();
        }

        // Update chart
        var ctx = document.getElementById("emissions-chart").getContext("2d");
        emissionsChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: countryNames,
            datasets: [
              {
                label: "CO2 Emissions (MtCO2)",
                data: co2Data,
                backgroundColor: "rgba(255, 99, 132, 0.2)",
                borderColor: "rgba(255, 99, 132, 1)",
                borderWidth: 1,
              },
              {
                label: "Methane Emissions (MtCH4)",
                data: methaneData,
                backgroundColor: "rgba(54, 162, 235, 0.2)",
                borderColor: "rgba(54, 162, 235, 1)",
                borderWidth: 1,
              },
            ],
          },
          options: {
            scales: {
              y: {
                beginAtZero: true,
              },
            },
          },
        });
      }

      // Initialize visualization on page load
      updateVisualization();
    </script>
  </body>
</html>
